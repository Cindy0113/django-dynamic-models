[tox]
envlist =
    py37-django21-{sqlite,mysql,postgres}

[testenv]
deps =
    django21: Django>=2.1
    django-model-utils
    #postgres: psycopg2
    #mysql: mysqlclient

    pytest
    pytest-django
    pytest-cov

setenv = 
    PYTHONWARNINGS=module::DepricationWarning

    postgres: DJANGO_SETTINGS_MODULE=tests.settings.postgres
    mysql:    DJANGO_SETTINGS_MODULE=tests.settings.mysql
    sqlite:   DJANGO_SETTINGS_MODULE=tests.settings.sqlite

commands = 
    py.test --cov-config=tox.ini
            --cov=dynamic_models
            --cov-report html

[coverage:run]
include = dynamic_models/*
omit = dynamic_models/tests/*

[pytest]
testpaths = tests